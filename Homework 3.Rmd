---
title: "Homework 3"
author: "Mari Sanders"
date: "2024-10-05"
output: html_document
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
library(tidyverse)
library(readxl)
library(p8105.datasets)
data("ny_noaa")
```


## Problem 1 

```{r}
ny_noaa %>% 
  janitor::clean_names() %>% 
  separate(date, into = c("year", "month", "day"), sep = "-") %>% 
  mutate(tmax,  tmax = as.integer(tmax)) %>% 
  mutate(tmin, tmin = as.integer(tmin))
```

## Problem 2 

```{r}
demographic_df <- read_csv("data/nhanes_covar.csv", skip = 4) %>%
  janitor::clean_names() %>% 
  filter(age > 21) %>% 
  filter(!is.na(bmi) & !is.na(age) & !is.na(education) & !is.na(sex))

accelerometer_df <- read_csv("data/nhanes_accel.csv") %>% 
  janitor::clean_names()

combined_data <- 
  left_join(demographic_df, accelerometer_df, by = "seqn") %>% 
  pivot_longer(
    cols = min1:min1440,
    values_to = "accelerometer",
    names_to = "minute",
    names_prefix = "min"
  )
combined_data %>% 
  count(sex) %>% distinct() %>% 
  knitr::kable()

demographic_df %>% count(sex) 
```

